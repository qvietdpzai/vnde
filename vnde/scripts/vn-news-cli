#!/usr/bin/env python3
import sys

try:
    import feedparser
except Exception:
    print("Thieu python3-feedparser. Cai: sudo apt install -y python3-feedparser")
    sys.exit(1)

feeds = {
    "vnexpress": "https://vnexpress.net/rss/tin-moi-nhat.rss",
    "tuoitre": "https://tuoitre.vn/rss/tin-moi-nhat.rss",
    "thanhnien": "https://thanhnien.vn/rss/home.rss",
}

src = (sys.argv[1] if len(sys.argv) > 1 else "vnexpress").lower()
url = feeds.get(src, feeds["vnexpress"])

feed = feedparser.parse(url)
print(f"VN News CLI - {src}\\n")
for i, e in enumerate(feed.entries[:15], start=1):
    title = getattr(e, "title", "(khong tieu de)")
    link = getattr(e, "link", "")
    print(f"{i:02d}. {title}")
    if link:
        print(f"    {link}")
